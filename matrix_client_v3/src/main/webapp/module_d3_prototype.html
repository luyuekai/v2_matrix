<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Matrix</title>
  <link rel="shortcut icon" href="assets/self-owned/ico/favicon.ico">

  <link rel="stylesheet" type="text/css" href="assets/reference/flat-admin/assets/css/vendor.css">
  <link rel="stylesheet" type="text/css" href="assets/reference/flat-admin/assets/css/flat-admin.css">
  <!-- Theme -->
  <link rel="stylesheet" type="text/css" href="assets/reference/flat-admin/assets/css/theme/blue-sky.css">
  <link rel="stylesheet" type="text/css" href="assets/reference/flat-admin/assets/css/theme/blue.css">
  <link rel="stylesheet" type="text/css" href="assets/reference/flat-admin/assets/css/theme/red.css">
  <link rel="stylesheet" type="text/css" href="assets/reference/flat-admin/assets/css/theme/yellow.css">

  <link rel="stylesheet" type="text/css" href="assets/self-owned/css/matrix_v3.css">
  <style>

  .node circle {
    fill: #999;
  }

  .node text {
    font: 10px sans-serif;
  }

  .node--internal circle {
    fill: #555;
  }

  .node--internal text {
    text-shadow: 0 1px 0 #fff, 0 -1px 0 #fff, 1px 0 0 #fff, -1px 0 0 #fff;
  }

  .link {
    fill: none;
    stroke: #555;
    stroke-opacity: 0.4;
    stroke-width: 1.5px;
  }

  </style>
</head>

<body>

  <div class="app app-blue-sky">

    <aside class="app-sidebar" id="sidebar"></aside>

    <div class="app-container" id="main_div">

      <nav class="navbar navbar-default" id="navbar"></nav>



      <div class="row">
        <div class="col-md-6">
          <div class="card card-mini">
            <div class="card-header">
              D3 Demo
            </div>
            <div class="card-body">
              <!-- 为 ECharts 准备一个具备大小（宽高）的 DOM -->
              <div id="main" style="width: 600px;height:600px;">
              <svg width="600" height="600"></svg>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card card-mini">
            <div class="card-header">
              Card Mini
            </div>
            <div class="card-body">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
            </div>
          </div>
        </div>
      </div>




      <div class="modal fade" id="popupModalPro" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
              <i class="fa fa-power-off"></i> &nbsp; <span class="modal-title" id="popupModalLabelPro"></span>
            </div>
            <div class="modal-body">
              <div id="modalContentDIVPro"></div>
            </div>
          </div>
        </div>
      </div>


      <footer class="app-footer" style="position:absolute;bottom:0;margin:0 auto;">
        <div class="row">
          <div class="col-xs-12">
            <div class="footer-copyright">
              Copyright © 2016 MATRIX Company Co,Ltd.
            </div>
          </div>
        </div>
      </footer>


      <div class="btn-floating" id="help-actions">
        <div class="btn-bg" style="background-color:#3498db;box-shadow: 0 1px 3px #3498db;"></div>
        <button type="button" class="btn btn-info btn-toggle" data-toggle="toggle" data-target="#help-actions">
          <i class="icon fa fa-plus"></i>
          <span class="help-text">Shortcut</span>
        </button>
        <div class="toggle-content">
          <ul class="actions">
            <li><a href="#">Website</a></li>
            <li><a href="#">Documentation</a></li>
            <li><a href="#">Issues</a></li>
            <li><a href="#">About</a></li>
          </ul>
        </div>
      </div>


    </div>

    <script type="text/javascript" src="assets/reference/flat-admin/assets/js/vendor_min.js"></script>
    <script type="text/javascript" src="assets/reference/flat-admin/assets/js/app.js"></script>

    <script src="assets/reference/codemirror/codemirror.js"></script>
    <script src="assets/reference/codemirror/mode/javascript/javascript.js"></script>

    <script src="assets/reference/jquery/jquery-1.11.1.min.js"></script>
    <script src="assets/reference/bootstrap/js/bootstrap.js"></script>
    <script src="assets/reference/jquery/jquery.json.js"></script>
    <script src="assets/reference/knockout.js/knockout-3.3.0.js"></script>
    <script src="assets/reference/jquery-tiny-pubsub/tiny-pubsub.js"></script>
    <script src="assets/reference/d3/d3.v4.min.js"></script>


    <!-- Javascript for Matrix Self Owned -->
    <script src="assets/self-owned/js/generic/generic_algorithm.js"></script>
    <script src="assets/self-owned/js/generic/generic_cache.js"></script>
    <script src="assets/self-owned/js/generic/generic_charting.js"></script>
    <script src="assets/self-owned/js/generic/generic_csv.js"></script>
    <script src="assets/self-owned/js/generic/generic_cud.js"></script>
    <script src="assets/self-owned/js/generic/generic_modal.js"></script>
    <script src="assets/self-owned/js/generic/generic_query.js"></script>
    <script src="assets/self-owned/js/generic/generic_table.js"></script>
    <script src="assets/self-owned/js/generic/generic_util.js"></script>
    <script src="assets/self-owned/js/generic/generic_validation.js"></script>
    <script src="assets/self-owned/js/generic/generic_workbench.js"></script>




    <script>
      $(document).ready(function() {
        $('#sidebar').load($.getRootPath() + '/assets/self-owned/html/side_content.html');
        $('#navbar').load($.getRootPath() + '/assets/self-owned/html/chart/nav_content.html');
        setTimeout(function() {
          resetCssClass('li_chart_prototype', 'active');
        }, 200);
      });
    </script>

    <script>

    var svg = d3.select("svg"),
        width = +svg.attr("width"),
        height = +svg.attr("height"),
        g = svg.append("g").attr("transform", "translate(" + width / 2 + "," + (height / 2 + 20) + ")");

    var stratify = d3.stratify()
        .parentId(function(d) { return d.id.substring(0, d.id.lastIndexOf(".")); });

    var cluster = d3.cluster()
        .size([360, width / 2 - 120]);

    d3.csv("assets/self-owned/data/d3/flare.csv", function(error, data) {
      if (error) throw error;

      var root = stratify(data)
          .sort(function(a, b) { return a.height - b.height || a.id.localeCompare(b.id); });

      cluster(root);

      var link = g.selectAll(".link")
          .data(root.descendants().slice(1))
        .enter().append("path")
          .attr("class", "link")
          .attr("d", function(d) {
            return "M" + project(d.x, d.y)
                + "C" + project(d.x, (d.y + d.parent.y) / 2)
                + " " + project(d.parent.x, (d.y + d.parent.y) / 2)
                + " " + project(d.parent.x, d.parent.y);
          });

      var node = g.selectAll(".node")
          .data(root.descendants())
        .enter().append("g")
          .attr("class", function(d) { return "node" + (d.children ? " node--internal" : " node--leaf"); })
          .attr("transform", function(d) { return "translate(" + project(d.x, d.y) + ")"; });

      node.append("circle")
          .attr("r", 2.5);

      node.append("text")
          .attr("dy", "0.31em")
          .attr("x", function(d) { return d.x < 180 === !d.children ? 6 : -6; })
          .style("text-anchor", function(d) { return d.x < 180 === !d.children ? "start" : "end"; })
          .attr("transform", function(d) { return "rotate(" + (d.x < 180 ? d.x - 90 : d.x + 90) + ")"; })
          .text(function(d) { return d.id.substring(d.id.lastIndexOf(".") + 1); });
    });

    function project(x, y) {
      var angle = (x - 90) / 180 * Math.PI, radius = y;
      return [radius * Math.cos(angle), radius * Math.sin(angle)];
    }

    </script>
</body>

</html>
